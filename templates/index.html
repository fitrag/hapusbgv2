<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hapus Background</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Poppins', 'sans-serif'],
          },
          colors: {
            primary: {
              50: '#f0f9ff',
              100: '#e0f2fe',
              200: '#bae6fd',
              300: '#7dd3fc',
              400: '#38bdf8',
              500: '#0ea5e9',
              600: '#0284c7',
              700: '#0369a1',
            },
            secondary: {
              500: '#8b5cf6',
              600: '#7c3aed',
              700: '#6d28d9',
            }
          },
          animation: {
            'bounce-slow': 'bounce 3s infinite',
          }
        }
      }
    }
  </script>
  <style>
    .gradient-bg {
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    }

    .card-hover {
      transition: all 0.3s ease;
    }

    .drop-animation {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        opacity: 1;
      }

      50% {
        opacity: .7;
      }
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.4);
    }

    .modal-content {
      background-color: #fefefe;
      margin: 5% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      max-width: 600px;
    }

    .close {
      color: #aaa;
      font-size: 28px;
      font-weight: bold;
    }

    .close:hover,
    .close:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }

    .preview img {
      max-width: 100%;
      height: auto;
    }
  </style>
</head>

<body class="bg-gray-50 min-h-screen font-sans">
  <!-- Header -->
  <header class="bg-white py-6 sticky top-0 z-50 border-b border-gray-100">
    <div class="max-w-5xl mx-auto px-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center">
          <div class="mr-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-primary-600" viewBox="0 0 20 20"
              fill="currentColor">
              <path fill-rule="evenodd"
                d="M4 2a2 2 0 00-2 2v11a3 3 0 106 0V4a2 2 0 00-2-2H4zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2 2 0 000-2.828L13.485 5.1a2 2 0 00-2.828 0L10 5.757v8.486zM16 18H9.071l6-6H16a2 2 0 012 2v2a2 2 0 01-2 2z"
                clip-rule="evenodd" />
            </svg>
          </div>
          <div>
            <h1 class="text-2xl font-bold text-gray-800">
              <span class="text-primary-600">Hapus</span><span class="font-light">BG</span>
            </h1>
            <div class="flex items-center mt-1">
              <span class="text-xs text-gray-500 mr-2">100% Otomatis</span>
              <span class="bg-green-500 text-white text-xs px-1.5 py-0.5 rounded-sm font-medium">Gratis</span>
            </div>
          </div>
        </div>

        <nav class="hidden md:flex items-center space-x-1">
          <a href="#"
            class="px-3 py-2 text-sm text-gray-700 hover:text-primary-600 hover:bg-gray-50 rounded-md transition-colors duration-200">Beranda</a>
          <a href="/hapusbg/download"
            class="px-3 py-2 text-sm text-gray-700 hover:text-primary-600 hover:bg-gray-50 rounded-md transition-colors duration-200">Dokumentasi</a>
          <a href="https://trakteer.id/junior_dev/tip?open=true" target="_blank"
            class="ml-2 px-4 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors duration-200 shadow-sm flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            Trakteer ☕
          </a>
        </nav>

        <!-- Tombol Hamburger -->
        <button id="mobile-menu-button" class="md:hidden text-gray-500 hover:text-gray-700 focus:outline-none">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>

      <!-- Menu Mobile -->
      <div id="mobile-menu" class="md:hidden hidden mt-4 space-y-2">
        <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md">Beranda</a>
        <a href="/hapusbg/download" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md">Dokumentasi</a>
        <a href="https://trakteer.id/junior_dev/tip?open=true" target="_blank"
          class="block px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          Trakteer ☕
        </a>
      </div>
    </div>
  </header>


  <main class="max-w-5xl mx-auto px-4 py-8">
    <!-- Banner Promosi HapusBG Offline -->
    <div class="w-full bg-gradient-to-br from-primary-600 to-secondary-600 rounded-2xl overflow-hidden shadow-xl mb-12 relative">
      <!-- Elemen dekoratif -->
      <div class="absolute top-0 right-0 w-64 h-64 bg-white opacity-10 rounded-full -translate-y-1/2 translate-x-1/4"></div>
      <div class="absolute bottom-0 left-0 w-48 h-48 bg-white opacity-10 rounded-full translate-y-1/3 -translate-x-1/4"></div>
      
      <div class="relative z-10 flex flex-col md:flex-row items-center">
        <!-- Bagian Kiri (Teks) -->
        <div class="w-full md:w-3/5 p-6 md:p-10 lg:p-12">
          <div class="inline-block px-3 py-1 bg-white/20 backdrop-blur-sm rounded-full text-white text-xs font-medium mb-4 animate-pulse">
            <span class="flex items-center">
              <span class="w-2 h-2 bg-green-400 rounded-full mr-2"></span>
              Versi Terbaru 2.0
            </span>
          </div>
          
          <h2 class="text-2xl md:text-3xl lg:text-4xl font-bold text-white mb-3 leading-tight">
            HapusBG <span class="font-light">Offline</span>
            <span class="block text-lg md:text-xl lg:text-2xl text-white/90 mt-1">Hapus Background Tanpa Internet</span>
          </h2>
          
          <p class="text-white/80 mb-6 text-sm md:text-base max-w-lg">
            Gunakan HapusBG secara offline di komputer Anda. Tidak perlu koneksi internet, tidak ada batasan jumlah gambar, dan tidak ada biaya berlangganan bulanan.
          </p>
          
          <div class="flex flex-wrap gap-4 mb-6">
            <div class="flex items-center bg-white/10 backdrop-blur-sm px-4 py-2 rounded-lg">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-300 mr-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
              <span class="text-white text-sm">Sekali Beli</span>
            </div>
            <div class="flex items-center bg-white/10 backdrop-blur-sm px-4 py-2 rounded-lg">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-300 mr-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
              <span class="text-white text-sm">Untuk Selamanya</span>
            </div>
            <div class="flex items-center bg-white/10 backdrop-blur-sm px-4 py-2 rounded-lg">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-300 mr-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
              <span class="text-white text-sm">Tanpa Batasan</span>
            </div>
          </div>
          
          <div class="flex flex-col sm:flex-row gap-4">
            <a href="/hapusbg/download#instalasi" class="inline-flex items-center justify-center px-6 py-3 bg-white text-primary-600 font-medium rounded-lg hover:bg-gray-100 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
              </svg>
              Dapatkan Sekarang
            </a>
            <div class="flex items-center">
              <div class="bg-white/10 backdrop-blur-sm px-4 py-3 rounded-lg text-white">
                <span class="text-lg font-bold">Rp 350.000</span>
                <span class="text-xs block text-white/80">Sekali bayar untuk selamanya</span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Bagian Kanan (Gambar) -->
        <div class="w-full md:w-2/5 p-6 flex justify-center items-center relative">
          <div class="relative">
            <!-- Lingkaran bersinar di belakang gambar -->
            <div class="absolute inset-0 bg-white/20 rounded-full blur-xl transform scale-90"></div>
            
            <!-- Gambar Contoh Before-After -->
            <div class="relative bg-white rounded-xl shadow-2xl overflow-hidden transform rotate-3 hover:rotate-0 transition-all duration-500 max-w-xs">
              <div class="absolute inset-0 bg-gradient-to-r from-primary-200/50 to-secondary-200/50 mix-blend-overlay"></div>
              
              <div class="flex">
                <!-- Before -->
                <div class="w-1/2 relative">
                  <img src="https://scontent.ftkg6-1.fna.fbcdn.net/v/t39.30808-6/497715760_591570883951170_7228883866279341288_n.jpg?_nc_cat=108&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeHMrl4Vlbn0902KcpZ59ayZCxpwRMBlO0QLGnBEwGU7RJtHThCcV1lJsHtqlwUIkuz38cvtwJic7fTYWwApbfIo&_nc_ohc=4GB_f-dEO90Q7kNvwFqJHU2&_nc_oc=Adn3YnhH_VYRkUP-ye2xF4rjx8Ci6kI4Fno8Rr81Vmi0tSEVZGB0DixOpk9h0jzPbXk&_nc_zt=23&_nc_ht=scontent.ftkg6-1.fna&_nc_gid=5dXJL_bHPVvybiqfjU2SOA&oh=00_AfLiVfteWEzY9NbixqWBxX5cCRu3lNr13PTrB0RGplxopw&oe=682B4551" alt="Before" class="w-full h-full object-cover" />
                  <div class="absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs py-1 text-center">Sebelum</div>
                </div>
                
                <!-- After -->
                <div class="w-1/2 relative bg-opacity-50 bg-gradient-to-b from-transparent to-gray-200">
                  <img src="https://scontent.ftkg6-1.fna.fbcdn.net/v/t39.30808-6/497806586_591570877284504_6811076241241549930_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeFyoDSa4yL4i3jvguf8KoWd8bF9CVA-X0HxsX0JUD5fQetbx-dmXthXpxIbH7c-KPqRUme5K6TxLi5d85bdme_9&_nc_ohc=w39PLA9y4jAQ7kNvwFtMqWA&_nc_oc=Adlg4KoX_kvt0uAJX6c-Fb1WQ3S3UgMDiq-0oRoNUX1EqF_VDmWLPZyXg-gt16Dkbbg&_nc_zt=23&_nc_ht=scontent.ftkg6-1.fna&_nc_gid=hkx63aYjD3pOANJ5PM8UPg&oh=00_AfIDkOwnx0s0t9b8fBQxFQizxni-h6B1_sUvZT3UC1TPYg&oe=682B7A11" alt="After" class="w-full h-full object-cover mix-blend-multiply" />
                  <div class="absolute bottom-0 left-0 right-0 bg-primary-500/70 text-white text-xs py-1 text-center">Sesudah</div>
                </div>
              </div>
              
              <!-- Badge -->
              <div class="absolute -top-3 -right-3 bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg transform rotate-12">
                Hasil HD
              </div>
            </div>
            
            <!-- Badge Fitur -->
            <div class="absolute -bottom-4 -left-4 bg-white rounded-lg shadow-lg px-3 py-2 text-xs font-medium text-gray-700 flex items-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-primary-500 mr-1" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
              AI Canggih
            </div>
            
            <!-- Badge Fitur 2 -->
            <div class="absolute -top-4 -right-10 bg-white rounded-lg shadow-lg px-3 py-2 text-xs font-medium text-gray-700 flex items-center transform rotate-12">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-primary-500 mr-1" viewBox="0 0 20 20" fill="currentColor">
                <path d="M5.5 16a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 16h-8z" />
              </svg>
              Offline Mode
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Drop Area -->
    <div id="dropArea"
      class="w-full p-8 border-2 border-dashed border-primary-400 bg-white rounded-2xl mb-8 text-center hover:bg-primary-50 transition-all duration-300 cursor-pointer shadow-lg group relative overflow-hidden">
      <!-- Background pattern -->
      <div class="absolute inset-0 bg-gradient-to-br from-primary-50 to-white opacity-50 z-0"></div>

      <!-- Animated circles -->
      <div class="absolute -bottom-16 -right-16 w-32 h-32 bg-primary-200 rounded-full opacity-20 z-0"></div>
      <div class="absolute -top-8 -left-8 w-24 h-24 bg-secondary-200 rounded-full opacity-20 z-0"></div>

      <div class="flex flex-col items-center relative z-10">
        <!-- Animated icon container -->
        <div class="relative mb-6 group-hover:scale-110 transition-transform duration-300">
          <div
            class="absolute inset-0 bg-primary-100 rounded-full scale-110 group-hover:scale-125 transition-transform duration-300 opacity-30">
          </div>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-20 w-20 text-primary-500" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z" />
          </svg>
        </div>

        <h3
          class="text-xl font-semibold text-gray-700 mb-2 group-hover:text-primary-600 transition-colors duration-300">
          Unggah Gambar Anda</h3>
        <p class="text-base text-gray-600 mb-3 max-w-md">Drag & drop gambar ke sini untuk menghapus background secara
          instan</p>

        <div class="flex items-center text-sm text-gray-500 mb-4">
          <span class="px-2 py-1 bg-gray-100 rounded-md mr-2">JPG</span>
          <span class="px-2 py-1 bg-gray-100 rounded-md mr-2">PNG</span>
          <span class="px-2 py-1 bg-gray-100 rounded-md">JPEG</span>
        </div>

        <button
          class="mt-2 px-8 py-3 bg-primary-500 text-white rounded-full hover:bg-primary-600 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-opacity-50 shadow-md hover:shadow-lg transform hover:-translate-y-1">
          <span class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd"
                d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z"
                clip-rule="evenodd" />
            </svg>
            Pilih Gambar
          </span>
        </button>
      </div>
      <input type="file" id="imageInput" accept="image/*" multiple class="hidden">
    </div>

    <!-- Processing Status -->
    <div id="processingStatus" class="mb-8 text-center hidden">
      <div class="relative">

        <!-- Main container -->
        <div
          class="relative flex items-center justify-center px-6 py-4 bg-gradient-to-r from-primary-500/10 to-primary-600/10 backdrop-blur-sm rounded-xl border border-primary-300/30 shadow-lg max-w-md mx-auto">
          <!-- Spinner with gradient -->
          <div class="relative mr-4">
            <div
              class="absolute inset-0 rounded-full bg-gradient-to-tr from-primary-400 to-secondary-500 blur-sm opacity-50 animate-pulse">
            </div>
            <svg class="relative animate-spin h-8 w-8 text-primary-500" xmlns="http://www.w3.org/2000/svg" fill="none"
              viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3"></circle>
              <path class="opacity-90" fill="currentColor"
                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
              </path>
            </svg>
          </div>

          <!-- Text content -->
          <div class="text-left">
            <h3 class="font-medium text-primary-700 text-lg">Memproses Gambar</h3>
            <p class="text-primary-600/80 text-sm">Mohon tunggu sebentar, kami sedang menghapus background...</p>
          </div>

        </div>
      </div>
    </div>

    <!-- Download All Button -->
    <div class="flex justify-center mb-8">
      <button id="downloadAllBtn"
        class="group relative hidden overflow-hidden px-8 py-4 bg-gradient-to-r from-secondary-500 to-secondary-600 text-white rounded-xl hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 flex items-center">
        <!-- Background glow effect -->
        <div
          class="absolute inset-0 w-full h-full bg-secondary-400 blur-md opacity-0 group-hover:opacity-30 transition-opacity duration-300">
        </div>

        <!-- Icon container with animation -->
        <div class="relative mr-3 bg-white/20 rounded-full p-2 group-hover:scale-110 transition-transform duration-300">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
          </svg>
        </div>

        <!-- Text with badge -->
        <div class="relative flex flex-col items-start">
          <span class="font-medium text-base">Download Semua Hasil</span>
          <span class="text-xs text-white/80">Format .zip terkompresi</span>
        </div>

      </button>
    </div>

    <!-- Cards for processed images -->
    <div id="cardsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
  </main>

  <!-- Footer -->
  <footer class="bg-gradient-to-b from-gray-900 to-black text-white pt-16 pb-8 relative overflow-hidden">
    <!-- Decorative elements -->
    <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary-500 via-secondary-500 to-primary-500">
    </div>
    <div class="absolute -top-24 -right-24 w-48 h-48 bg-primary-500 opacity-10 rounded-full blur-3xl"></div>
    <div class="absolute -bottom-32 -left-32 w-64 h-64 bg-secondary-500 opacity-10 rounded-full blur-3xl"></div>

    <div class="max-w-5xl mx-auto px-4 relative z-10">
      <!-- Footer Content -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-12 mb-12">
        <!-- Brand Section -->
        <div class="transform transition-all duration-500 hover:translate-y-[-5px]">
          <div class="flex items-center mb-5">
            <div class="relative mr-3 group">
              <div
                class="absolute inset-0 bg-gradient-to-r from-primary-400 to-secondary-400 rounded-lg blur-sm opacity-75 group-hover:opacity-100 transition-opacity duration-300">
              </div>
              <div class="relative bg-gray-900 p-2 rounded-lg">
                <svg xmlns="http://www.w3.org/2000/svg"
                  class="h-8 w-8 text-primary-400 group-hover:text-primary-300 transition-colors duration-300"
                  viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd"
                    d="M4 2a2 2 0 00-2 2v11a3 3 0 106 0V4a2 2 0 00-2-2H4zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2 2 0 000-2.828L13.485 5.1a2 2 0 00-2.828 0L10 5.757v8.486zM16 18H9.071l6-6H16a2 2 0 012 2v2a2 2 0 01-2 2z"
                    clip-rule="evenodd" />
                </svg>
              </div>
            </div>
            <h3 class="text-2xl font-bold">
              <span
                class="bg-clip-text text-transparent bg-gradient-to-r from-primary-400 to-primary-300">Hapus</span><span
                class="font-light">BG</span>
            </h3>
          </div>
          <p class="text-gray-300 text-sm mb-5 leading-relaxed">
            Layanan penghapus background gambar otomatis yang cepat, mudah, dan gratis. Dapatkan hasil terbaik dalam
            hitungan detik.
          </p>
          <div class="flex space-x-5">
            <a href="#"
              class="text-gray-400 hover:text-primary-400 transition-all duration-300 transform hover:scale-110">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                <path
                  d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z" />
              </svg>
            </a>
            <a href="#"
              class="text-gray-400 hover:text-primary-400 transition-all duration-300 transform hover:scale-110">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                <path
                  d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
              </svg>
            </a>
            <a href="#"
              class="text-gray-400 hover:text-primary-400 transition-all duration-300 transform hover:scale-110">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                <path
                  d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
              </svg>
            </a>
          </div>
        </div>

        <!-- Links Section -->
        <div class="grid grid-cols-2 gap-8">
          <div class="transform transition-all duration-500 hover:translate-y-[-5px]">
            <h4 class="text-white font-medium mb-5 text-lg relative inline-block">
              <span class="relative z-10">Layanan</span>
              <span class="absolute bottom-0 left-0 w-full h-1 bg-primary-500 opacity-50"></span>
            </h4>
            <ul class="space-y-3">
              <li><a href="#"
                  class="text-gray-300 hover:text-primary-400 transition-colors duration-300 text-sm flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-2 text-primary-500" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                  </svg>
                  Hapus Background</a></li>
              <li><a href="#"
                  class="text-gray-300 hover:text-primary-400 transition-colors duration-300 text-sm flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-2 text-primary-500" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                  </svg>
                  Edit Foto</a></li>
              <li><a href="#"
                  class="text-gray-300 hover:text-primary-400 transition-colors duration-300 text-sm flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-2 text-primary-500" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                  </svg>
                  Kompresi Gambar</a></li>
              <li><a href="#"
                  class="text-gray-300 hover:text-primary-400 transition-colors duration-300 text-sm flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-2 text-primary-500" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                  </svg>
                  Konversi Format</a></li>
            </ul>
          </div>
          <div class="transform transition-all duration-500 hover:translate-y-[-5px]">
            <h4 class="text-white font-medium mb-5 text-lg relative inline-block">
              <span class="relative z-10">Perusahaan</span>
              <span class="absolute bottom-0 left-0 w-full h-1 bg-primary-500 opacity-50"></span>
            </h4>
            <ul class="space-y-3">
              <li><a href="#"
                  class="text-gray-300 hover:text-primary-400 transition-colors duration-300 text-sm flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-2 text-primary-500" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                  </svg>
                  Tentang Kami</a></li>
              <li><a href="#"
                  class="text-gray-300 hover:text-primary-400 transition-colors duration-300 text-sm flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-2 text-primary-500" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                  </svg>
                  Kontak</a></li>
              <li><a href="#"
                  class="text-gray-300 hover:text-primary-400 transition-colors duration-300 text-sm flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-2 text-primary-500" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                  </svg>
                  Blog</a></li>
              <li><a href="#"
                  class="text-gray-300 hover:text-primary-400 transition-colors duration-300 text-sm flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-2 text-primary-500" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                  </svg>
                  Karir</a></li>
            </ul>
          </div>
        </div>

        <!-- Newsletter Section -->
        <div class="transform transition-all duration-500 hover:translate-y-[-5px]">
          <h4 class="text-white font-medium mb-5 text-lg relative inline-block">
            <span class="relative z-10">Berlangganan Newsletter</span>
            <span class="absolute bottom-0 left-0 w-full h-1 bg-primary-500 opacity-50"></span>
          </h4>
          <p class="text-gray-300 text-sm mb-5 leading-relaxed">Dapatkan update dan tips terbaru seputar edit foto.</p>
          <form class="flex mb-4">
            <div class="relative flex-grow">
              <input type="email" placeholder="Email Anda"
                class="px-4 py-3 w-full rounded-l-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-gray-800 text-sm bg-gray-800 border-0 text-white" />
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400" fill="none" viewBox="0 0 24 24"
                  stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
              </div>
            </div>
            <button type="submit"
              class="bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 px-4 py-3 rounded-r-lg transition-all duration-300 shadow-lg hover:shadow-xl">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
              </svg>
            </button>
          </form>
          <div class="bg-gray-800 rounded-lg p-4 border border-gray-700">
            <div class="flex items-center text-sm text-gray-300">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-400 mr-2" fill="none"
                viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <span>Kami tidak akan mengirim spam ke email Anda.</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Divider with gradient -->
      <div class="h-px w-full bg-gradient-to-r from-transparent via-gray-700 to-transparent my-8"></div>

      <!-- Copyright Section -->
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="flex flex-col items-center md:items-start mb-4 md:mb-0">
          <p class="text-gray-400 text-sm">© 2023 HapusBG. Semua hak dilindungi.</p>
          <div class="flex items-center mt-2 text-gray-500 text-xs">
            <span class="flex items-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-red-500 mr-1 animate-pulse"
                viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd"
                  d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"
                  clip-rule="evenodd" />
              </svg>
              Made with love by <span class="text-primary-400 font-medium ml-1">Fadila Fitra Kusuma Jaya</span>
            </span>
          </div>
        </div>
        <div class="flex space-x-6">
          <a href="#" class="text-gray-500 hover:text-gray-300 transition-colors duration-300 text-sm">Kebijakan
            Privasi</a>
          <a href="#" class="text-gray-500 hover:text-gray-300 transition-colors duration-300 text-sm">Syarat &
            Ketentuan</a>
          <a href="#" class="text-gray-500 hover:text-gray-300 transition-colors duration-300 text-sm">Bantuan</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Modal Editor -->
  <div id="editor-modal" class="modal hidden backdrop-blur-sm fixed inset-0 z-50 p-0">
    <div
      class="modal-content bg-white rounded-none shadow-xl p-0 max-w-none mx-auto overflow-hidden transition-all duration-300 transform dark:bg-gray-800">
      <!-- Header -->
      <div class="bg-gradient-to-r from-primary-500 to-secondary-500 p-4 relative">
        <h2 class="text-white text-lg font-semibold">Edit Background</h2>
        <button
          class="absolute top-3 right-3 text-white hover:text-gray-200 focus:outline-none transition-transform duration-300 hover:rotate-90"
          onclick="closeEditorModal()">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>

      <!-- Content - 2 Column Layout -->
      <div class="flex flex-col md:flex-row h-[calc(100vh-120px)]">
        <!-- Left Column - Controls -->
        <div
          class="w-full md:w-1/3 border-r border-gray-200 dark:border-gray-700 p-6 overflow-y-auto bg-gradient-to-b from-gray-50 to-white dark:from-gray-800 dark:to-gray-900">
          <div class="space-y-8">
            <!-- Color Picker -->
            <div
              class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-100 dark:border-gray-700 transition-all duration-300 hover:shadow-md">
              <label for="bg-color"
                class="block text-gray-700 dark:text-gray-300 font-medium mb-3 flex items-center text-sm">
                <span
                  class="flex items-center justify-center bg-gradient-to-r from-primary-500 to-primary-600 text-white p-1.5 rounded-lg mr-3 shadow-sm">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                      d="M4 2a2 2 0 00-2 2v11a3 3 0 106 0V4a2 2 0 00-2-2H4zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2 2 0 000-2.828L13.485 5.1a2 2 0 00-2.828 0L10 5.757v8.486zM16 18H9.071l6-6H16a2 2 0 012 2v2a2 2 0 01-2 2z"
                      clip-rule="evenodd" />
                  </svg>
                </span>
                <span class="text-base">Pilih Warna Background</span>
              </label>
              <div class="flex flex-wrap items-center gap-3 mt-2">
                <input type="color" id="bg-color" onchange="changeBackgroundColor()"
                  class="h-10 w-10 rounded-lg cursor-pointer border-0 bg-transparent shadow-sm">
                <div class="flex flex-wrap gap-2">
                  <button
                    class="w-8 h-8 rounded-full bg-white border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary-500 transform transition-transform hover:scale-110 shadow-sm"
                    onclick="setPresetColor('#FFFFFF')"></button>
                  <button
                    class="w-8 h-8 rounded-full bg-blue-500 focus:outline-none focus:ring-2 focus:ring-primary-500 transform transition-transform hover:scale-110 shadow-sm"
                    onclick="setPresetColor('#3B82F6')"></button>
                  <button
                    class="w-8 h-8 rounded-full bg-green-500 focus:outline-none focus:ring-2 focus:ring-primary-500 transform transition-transform hover:scale-110 shadow-sm"
                    onclick="setPresetColor('#10B981')"></button>
                  <button
                    class="w-8 h-8 rounded-full bg-red-500 focus:outline-none focus:ring-2 focus:ring-primary-500 transform transition-transform hover:scale-110 shadow-sm"
                    onclick="setPresetColor('#EF4444')"></button>
                  <button
                    class="w-8 h-8 rounded-full bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-primary-500 transform transition-transform hover:scale-110 shadow-sm"
                    onclick="setPresetColor('#F59E0B')"></button>
                </div>
              </div>
            </div>

            <!-- Image Upload -->
            <div
              class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-100 dark:border-gray-700 transition-all duration-300 hover:shadow-md">
              <label for="bg-image"
                class="block text-gray-700 dark:text-gray-300 font-medium mb-3 flex items-center text-sm">
                <span
                  class="flex items-center justify-center bg-gradient-to-r from-secondary-500 to-secondary-600 text-white p-1.5 rounded-lg mr-3 shadow-sm">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                      d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"
                      clip-rule="evenodd" />
                  </svg>
                </span>
                <span class="text-base">Unggah Gambar Background</span>
              </label>
              <div class="relative mt-2">
                <input type="file" id="bg-image" accept="image/*" onchange="changeBackgroundImage()" class="hidden">
                <button onclick="document.getElementById('bg-image').click()"
                  class="w-full py-3 px-4 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-all duration-300 flex items-center justify-center text-sm shadow-sm hover:shadow group">
                  <span
                    class="bg-secondary-100 dark:bg-secondary-900 p-1.5 rounded-full mr-3 group-hover:bg-secondary-200 dark:group-hover:bg-secondary-800 transition-colors duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-secondary-500" viewBox="0 0 20 20"
                      fill="currentColor">
                      <path fill-rule="evenodd"
                        d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z"
                        clip-rule="evenodd" />
                    </svg>
                  </span>
                  <span>Pilih Gambar</span>
                </button>
              </div>
            </div>

            <!-- Resize -->
            <div
              class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-100 dark:border-gray-700 transition-all duration-300 hover:shadow-md">
              <h3 class="text-gray-700 dark:text-gray-300 font-medium mb-3 flex items-center text-sm">
                <span
                  class="flex items-center justify-center bg-gradient-to-r from-blue-500 to-blue-600 text-white p-1.5 rounded-lg mr-3 shadow-sm">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                    <path
                      d="M4 3a1 1 0 000 2h12a1 1 0 100-2H4zM3 7a1 1 0 011-1h2a1 1 0 110 2H5v6h2a1 1 0 110 2H4a1 1 0 01-1-1V7zm10 6h2v-6h-2a1 1 0 010-2h3a1 1 0 011 1v10a1 1 0 01-1 1h-3a1 1 0 010-2z" />
                  </svg>
                </span>
                <span class="text-base">Resize Gambar</span>
              </h3>
              <div class="flex gap-3 items-center mt-2 bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">
                <input type="number" id="resize-width" placeholder="Lebar"
                  class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 shadow-sm" />
                <span class="text-gray-500 dark:text-gray-400 font-bold">×</span>
                <input type="number" id="resize-height" placeholder="Tinggi"
                  class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 shadow-sm" />
              </div>
              <label class="flex items-center text-sm mt-2 text-gray-600 dark:text-gray-400 ml-2">
                <input type="checkbox" id="lock-aspect" checked
                  class="mr-2 h-4 w-4 text-blue-500 focus:ring-blue-500 rounded">
                <span>Lock Aspect Ratio</span>
              </label>
            </div>

            <!-- Crop Section -->
            <div
              class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-100 dark:border-gray-700 transition-all duration-300 hover:shadow-md">
              <h3 class="text-gray-700 dark:text-gray-300 font-medium mb-3 flex items-center text-sm">
                <span
                  class="flex items-center justify-center bg-gradient-to-r from-green-500 to-green-600 text-white p-1.5 rounded-lg mr-3 shadow-sm">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                      d="M4 3a1 1 0 00-1 1v2a1 1 0 102 0V5h2a1 1 0 100-2H4zm11 2a1 1 0 112 0v10a1 1 0 11-2 0V5zM6 17a1 1 0 100 2h10a1 1 0 100-2H6z"
                      clip-rule="evenodd" />
                  </svg>
                </span>
                <span class="text-base">Crop Gambar</span>
              </h3>
              <div class="flex gap-3 mt-2">
                <button onclick="startCropper()"
                  class="flex-1 py-2.5 px-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 text-sm transition-all duration-300 shadow-sm hover:shadow focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center justify-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                  </svg>
                  Mulai Crop
                </button>
                <button onclick="applyCrop()"
                  class="flex-1 py-2.5 px-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 text-sm transition-all duration-300 shadow-sm hover:shadow focus:ring-2 focus:ring-offset-2 focus:ring-green-500 flex items-center justify-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                  </svg>
                  Simpan Crop
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Column - Preview -->
        <div class="w-full md:w-2/3 p-6 flex flex-col">
          <h3 class="text-gray-700 dark:text-gray-300 font-medium mb-4 flex items-center text-base">
            <span
              class="flex items-center justify-center bg-gradient-to-r from-primary-500 to-primary-600 text-white p-1.5 rounded-lg mr-3 shadow-sm">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                <path fill-rule="evenodd"
                  d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"
                  clip-rule="evenodd" />
              </svg>
            </span>
            <span>Preview</span>
          </h3>
          <div
            class="bg-gradient-to-br from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-xl p-6 flex-grow relative overflow-hidden border border-gray-100 dark:border-gray-700 shadow-lg transition-all duration-300 hover:shadow-xl">
            <!-- Background pattern -->
            <div class="absolute inset-0 bg-grid-primary-100/20 opacity-30"></div>
            <!-- Preview container with glass effect -->
            <div
              class="h-full w-full flex items-center justify-center rounded-lg overflow-hidden backdrop-blur-sm bg-white/30 dark:bg-black/20 shadow-xl relative z-10 transition-transform duration-500 hover:scale-[1.01]">

              <!-- Image with enhanced styling -->
              <div class="relative p-4 z-10 w-full h-full flex items-center justify-center">
                <img id="image-preview" src="" alt="Preview"
                  class="max-w-full max-h-full object-contain rounded-md shadow-2xl transition-all duration-300 hover:shadow-primary-500/20" />

                <!-- Loading overlay -->
                <div id="preview-loading"
                  class="absolute inset-0 bg-white/80 dark:bg-black/80 flex items-center justify-center rounded-lg z-20 hidden">
                  <div class="flex flex-col items-center">
                    <div
                      class="w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mb-3">
                    </div>
                    <p class="text-primary-600 dark:text-primary-400 font-medium">Memuat preview...</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div
        class="bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 p-4 flex justify-between items-center border-t border-gray-100 dark:border-gray-700 backdrop-blur-sm">
        <!-- Left side - Stats or info -->
        <div class="flex items-center space-x-4">
          <div class="flex items-center text-gray-500 dark:text-gray-400 text-xs">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 text-primary-500" viewBox="0 0 20 20"
              fill="currentColor">
              <path fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"
                clip-rule="evenodd" />
            </svg>
            <span>Terakhir diubah: <span class="font-medium">Baru saja</span></span>
          </div>
        </div>

        <!-- Right side - Action buttons -->
        <div class="flex items-center space-x-3">
          <button onclick="closeEditorModal()"
            class="px-4 py-2 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-300 font-medium text-sm border border-gray-200 dark:border-gray-600 flex items-center shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:ring-opacity-50">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd"
                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                clip-rule="evenodd" />
            </svg>
            Batal
          </button>
          <button onclick="saveChanges()"
            class="px-4 py-2 bg-gradient-to-r from-primary-500 to-primary-600 text-white rounded-lg hover:from-primary-600 hover:to-primary-700 transition-all duration-300 font-medium shadow-md hover:shadow-lg flex items-center text-sm transform hover:translate-y-[-1px] focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-opacity-50">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd" />
            </svg>
            Simpan
          </button>
          <button onclick="downloadEditedImage()"
            class="px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-300 font-medium shadow-md hover:shadow-lg flex items-center text-sm transform hover:translate-y-[-1px] focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 relative group">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
            </svg>
            Download
            <span
              class="absolute -top-2 -right-2 bg-white text-green-600 text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center shadow-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300">HD</span>
          </button>
        </div>
      </div>
    </div>
  </div>


  <script src="https://unpkg.com/cropperjs@1.5.13/dist/cropper.min.js"></script>
  <link href="https://unpkg.com/cropperjs@1.5.13/dist/cropper.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <script>
    const dropArea = document.getElementById('dropArea');
    const input = document.getElementById('imageInput');
    const container = document.getElementById('cardsContainer');
    const downloadAllBtn = document.getElementById('downloadAllBtn');
    const processingStatus = document.getElementById('processingStatus');

    const menuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');

    menuButton.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });

    let cropper;

    function startCropper() {
      const previewImg = document.getElementById('image-preview');

      if (cropper) {
        cropper.destroy();
      }

      cropper = new Cropper(previewImg, {
        aspectRatio: NaN,
        viewMode: 1,
      });
    }

    function applyCrop() {
      if (!cropper) return;

      const canvas = cropper.getCroppedCanvas();
      const croppedDataUrl = canvas.toDataURL();

      // Update the preview
      document.getElementById('image-preview').src = croppedDataUrl;

      // Destroy cropper instance
      cropper.destroy();
      cropper = null;

      // Optionally update original image input (bg-image) if needed
    }

    let totalFiles = 0;
    let processedFiles = 0;
    let zip = new JSZip();
    const zipFilesMap = new Map();

    let selectedImageUrl = '';

    function openEditorModal(imageUrl) {
      selectedImageUrl = imageUrl;
      document.getElementById('editor-modal').style.display = 'block';
      document.getElementById('image-preview').src = imageUrl;
    }

    function closeEditorModal() {
      document.getElementById('editor-modal').style.display = 'none';
    }

    function changeBackgroundColor() {
      const color = document.getElementById('bg-color').value;
      document.getElementById('image-preview').style.backgroundColor = color;
    }

    function changeBackgroundImage() {
      const file = document.getElementById('bg-image').files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          document.getElementById('image-preview').style.backgroundImage = `url(${e.target.result})`;
        }
        reader.readAsDataURL(file);
      }
    }
    function setPresetColor(color) {
      document.getElementById('bg-color').value = color;
      changeBackgroundColor();
    }

    document.getElementById('image-preview').onload = function () {
      const image = this;
      document.getElementById('resize-width').value = image.naturalWidth;
      document.getElementById('resize-height').value = image.naturalHeight;
      updatePreviewSize();
    };


    document.getElementById('resize-width').addEventListener('input', function () {
      const lock = document.getElementById('lock-aspect').checked;
      const image = document.getElementById('image-preview');
      if (!lock) return updatePreviewSize();
      const ratio = image.naturalHeight / image.naturalWidth;
      document.getElementById('resize-height').value = Math.round(this.value * ratio);
      updatePreviewSize();
    });

    document.getElementById('resize-height').addEventListener('input', function () {
      const lock = document.getElementById('lock-aspect').checked;
      const image = document.getElementById('image-preview');
      if (!lock) return updatePreviewSize();
      const ratio = image.naturalWidth / image.naturalHeight;
      document.getElementById('resize-width').value = Math.round(this.value * ratio);
      updatePreviewSize();
    });

    function downloadEditedImage() {
      const image = document.getElementById('image-preview');
      const bgImageInput = document.getElementById('bg-image');
      const bgColor = document.getElementById('bg-color').value;

      // Ambil nilai resize (fallback ke ukuran asli jika kosong)
      const width = parseInt(document.getElementById('resize-width').value) || image.naturalWidth;
      const height = parseInt(document.getElementById('resize-height').value) || image.naturalHeight;

      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = width;
      canvas.height = height;

      const drawAndDownload = (bgDrawFn) => {
        bgDrawFn(); // gambar background
        ctx.drawImage(image, 0, 0, width, height); // gambar utama
        canvas.toBlob(function (blob) {
          const link = document.createElement('a');
          link.href = URL.createObjectURL(blob);
          link.download = 'edited_image.png';
          link.click();
        }, 'image/png');
      };

      if (bgImageInput.files && bgImageInput.files[0]) {
        const reader = new FileReader();
        reader.onload = function (e) {
          const bgImg = new Image();
          bgImg.onload = function () {
            drawAndDownload(() => {
              ctx.drawImage(bgImg, 0, 0, width, height);
            });
          };
          bgImg.src = e.target.result;
        };
        reader.readAsDataURL(bgImageInput.files[0]);
      } else {
        drawAndDownload(() => {
          ctx.fillStyle = bgColor;
          ctx.fillRect(0, 0, width, height);
        });
      }
    }
    function updatePreviewSize() {
      const img = document.getElementById('image-preview');
      const width = parseInt(document.getElementById('resize-width').value);
      const height = parseInt(document.getElementById('resize-height').value);

      if (width && height) {
        img.style.width = `${width}px`;
        img.style.height = `${height}px`;
      } else {
        img.style.width = 'auto';
        img.style.height = 'auto';
      }
    }


    function saveChanges() {
      const newBackground = document.getElementById('image-preview').style.backgroundImage || document.getElementById('image-preview').style.backgroundColor;
      const previewImage = document.getElementById('image-preview');
      previewImage.style.backgroundImage = newBackground;
      closeEditorModal();
    }// Untuk melacak file yang tersimpan di ZIP

    dropArea.addEventListener('click', () => input.click());
    dropArea.addEventListener('dragover', (e) => {
      e.preventDefault();
      dropArea.classList.add('bg-primary-100');
      dropArea.classList.add('border-primary-500');
    });
    dropArea.addEventListener('dragleave', () => {
      dropArea.classList.remove('bg-primary-100');
      dropArea.classList.remove('border-primary-500');
    });
    dropArea.addEventListener('drop', (e) => {
      e.preventDefault();
      dropArea.classList.remove('bg-primary-100');
      dropArea.classList.remove('border-primary-500');
      handleFiles(e.dataTransfer.files);
    });
    input.addEventListener('change', () => {
      handleFiles(input.files);
    });

    async function handleFiles(files) {
      if (files.length === 0) return;

      totalFiles = files.length;
      processedFiles = 0;
      zip = new JSZip();
      zipFilesMap.clear();
      container.innerHTML = ''; // Hapus semua card sebelumnya
      processingStatus.classList.remove('hidden');
      downloadAllBtn.classList.add('hidden');

      for (const file of files) {
        const card = document.createElement('div');
        card.className = 'bg-white p-4 rounded-lg shadow-md flex flex-col items-center card-hover';
        card.innerHTML = `
          <p class="text-sm font-medium text-gray-700 mb-2 truncate w-full text-center hover:text-primary-600 transition-colors duration-200" title="${file.name}">${file.name}</p>
          <div class="relative w-full pt-[100%] mb-3 overflow-hidden rounded-lg bg-gradient-to-br from-gray-50 to-white shadow-inner">
            <!-- Animated background elements -->
            <div class="absolute inset-0 bg-gradient-to-r from-primary-50/50 to-primary-100/50 animate-pulse"></div>
            <div class="absolute -bottom-6 -right-6 w-24 h-24 bg-primary-200/30 rounded-full animate-pulse"></div>
            <div class="absolute -top-6 -left-6 w-20 h-20 bg-secondary-200/20 rounded-full animate-pulse"></div>
            
            <div class="absolute inset-0 flex flex-col items-center justify-center">
              <!-- Improved spinner with 3D effect -->
              <div class="relative z-10 transform hover:scale-105 transition-all duration-300">
                <!-- Outer glow -->
                <div class="absolute -inset-2 bg-primary-300/20 rounded-full blur-xl opacity-70 animate-pulse"></div>
                <!-- Inner glow -->
                <div class="absolute -inset-1 bg-primary-400/30 rounded-full blur-md opacity-80 animate-pulse"></div>
                <!-- Spinner -->
                <div class="w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin relative z-10 shadow-lg">
                  <!-- Inner spinner accent -->
                  <div class="absolute inset-1 rounded-full border border-primary-200 border-t-transparent animate-spin opacity-50"></div>
                </div>
              </div>
              
              <!-- Processing text with animation -->
              <div class="mt-5 relative z-10 bg-white/90 backdrop-blur-sm px-4 py-1.5 rounded-full shadow-md transform hover:scale-105 transition-all duration-300">
                <p class="text-xs font-medium bg-clip-text text-transparent bg-gradient-to-r from-primary-600 to-primary-500 animate-pulse">Sedang memproses...</p>
              </div>
            </div>
          </div>
          
          <!-- Improved progress indicator -->
          <div class="flex items-center justify-between w-full bg-gray-50 p-2 rounded-lg shadow-sm">
            <div class="flex-1 mr-3">
              <div class="h-1.5 w-full bg-gray-200 rounded-full overflow-hidden">
                <div class="h-full bg-gradient-to-r from-primary-400 via-primary-500 to-primary-600 w-3/4 rounded-full animate-pulse shadow-inner"></div>
              </div>
              <div class="flex justify-between mt-1 text-[10px] text-gray-400">
                <span>0%</span>
                <span>Menghapus background...</span>
                <span>100%</span>
              </div>
            </div>
            <div class="text-xs font-medium text-primary-600 bg-primary-50 px-2 py-1 rounded-md shadow-inner animate-pulse">75%</div>
          </div>
        `;
        container.appendChild(card);

        const formData = new FormData();
        formData.append('image', file);

        try {
          const res = await fetch('/process-single', {
            method: 'POST',
            body: formData
          });

          const blob = await res.blob();
          const filename = `processed_${Date.now()}_${Math.floor(Math.random() * 10000)}.png`;
          zip.file(filename, blob);
          zipFilesMap.set(filename, blob);

          const url = URL.createObjectURL(blob);
          card.setAttribute('data-filename', filename);
          card.innerHTML = `
            <div class="relative w-full pt-[100%] mb-3 overflow-hidden rounded-lg shadow-lg group">
              <div class="absolute inset-0 bg-gradient-to-br from-gray-200 to-white opacity-50"></div>
              <img src="${url}" alt="Processed" class="absolute inset-0 w-full h-full object-cover z-10 transition-transform duration-300 group-hover:scale-105">
              <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                <p class="text-white text-sm truncate">${filename}</p>
              </div>
            </div>
            <div class="flex space-x-2 w-full">
              <div class="relative group w-full">

                <button class="flex-1 px-3 py-2.5 bg-primary-600 text-white text-sm rounded-lg hover:bg-primary-700 transition-all duration-300 shadow-md hover:shadow-lg transform hover:scale-[1.02] flex items-center justify-center group relative overflow-hidden w-full" onclick="toggleDropdown(this)">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4" />
                    <polyline points="7 10 12 15 17 10" />
                    <line x1="12" y1="15" x2="12" y2="3" />
                  </svg>
                  <span class="relative z-10">Download</span>
                </button>
              <div class="hidden absolute z-30 mt-2 w-full bg-white border border-gray-200 rounded-md shadow-lg" data-dropdown>
                <a href="${url}" download="${filename}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Download HD (PNG)</a>
                <button onclick="downloadCompressed(this, 'image/png', 'png')" data-url="${url}" class="w-full text-left block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Download Compressed (PNG)</button>
                <button onclick="downloadCompressed(this, 'image/jpeg', 'jpg')" data-url="${url}" class="w-full text-left block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Download Compressed (JPG)</button>
                <button onclick="downloadCompressed(this, 'image/webp', 'webp')" data-url="${url}" class="w-full text-left block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Download Compressed (WEBP)</button>
              </div>

              </div>

              <button 
                class="p-2.5 bg-red-500 text-white text-sm rounded-lg hover:bg-red-600 transition-all duration-300 shadow-md hover:shadow-lg transform hover:scale-[1.02] flex items-center justify-center group relative overflow-hidden" 
                onclick="confirmDelete(this)">
                <!-- Efek lingkaran pada hover -->
                <span class="absolute w-0 h-0 rounded-full bg-white opacity-10 group-hover:w-20 group-hover:h-20 -translate-x-1/2 -translate-y-1/2 transition-all duration-500 ease-out"></span>
                <!-- Ikon hapus yang lebih detail -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 relative z-10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="3 6 5 6 21 6" />
                  <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2" />
                  <line x1="10" y1="11" x2="10" y2="17" />
                  <line x1="14" y1="11" x2="14" y2="17" />
                </svg>
              </button>
              <button 
                class="p-2.5 bg-yellow-500 text-white text-sm rounded-lg hover:bg-yellow-600 transition-all duration-300 shadow-md hover:shadow-lg transform hover:scale-[1.02] flex items-center justify-center group relative overflow-hidden" 
                onclick="openEditorModal('${url}')">
                <!-- Efek lingkaran pada hover -->
                <span class="absolute w-0 h-0 rounded-full bg-white opacity-10 group-hover:w-20 group-hover:h-20 -translate-x-1/2 -translate-y-1/2 transition-all duration-500 ease-out"></span>
                <!-- Ikon edit yang lebih detail -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 relative z-10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" />
                  <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" />
                </svg>
              </button>
            </div>
          `;
        } catch (err) {
          card.innerHTML = `
            <div class="p-4 bg-red-50 rounded-lg text-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-red-500 mx-auto mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <p class="text-red-600 text-sm">Gagal memproses ${file.name}</p>
            </div>
          `;
        }

        processedFiles++;
        if (processedFiles === totalFiles) {
          processingStatus.classList.add('hidden');
          downloadAllBtn.classList.remove('hidden');
        }
      }

      input.value = '';
    }

    function confirmDelete(button) {
      Swal.fire({
        title: 'Yakin ingin menghapus gambar ini?',
        text: 'Tindakan ini tidak dapat dibatalkan!',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#d33',
        cancelButtonColor: '#3085d6',
        confirmButtonText: 'Ya, hapus',
        cancelButtonText: 'Batal'
      }).then((result) => {
        if (result.isConfirmed) {
          deleteImage(button);
        }
      });
    }

    function deleteImage(button) {
      const card = button.closest('div.card-hover');
      const filename = card.getAttribute('data-filename');
      if (filename) {
        zip.remove(filename);
        zipFilesMap.delete(filename);
      }
      card.remove();

      if (container.childElementCount === 0) {
        downloadAllBtn.classList.add('hidden');
      }
    }

    downloadAllBtn.addEventListener('click', () => {
      const newZip = new JSZip();
      for (let [filename, blob] of zipFilesMap.entries()) {
        newZip.file(filename, blob);
      }
      newZip.generateAsync({ type: 'blob' }).then(function (content) {
        const link = document.createElement('a');
        link.href = URL.createObjectURL(content);
        link.download = 'processed_images.zip';
        link.click();
      });
    });

    function downloadCompressed(button, mimeType = "image/png", ext = "png") {
      const imageUrl = button.dataset.url;

      fetch(imageUrl)
        .then(res => res.blob())
        .then(blob => {
          const img = new Image();
          img.onload = function () {
            // Resize ke lebar maksimal 1024px
            const MAX_WIDTH = 1024;
            let width = img.width;
            let height = img.height;

            if (width > MAX_WIDTH) {
              const scale = MAX_WIDTH / width;
              width = MAX_WIDTH;
              height = Math.round(height * scale);
            }

            const canvas = document.createElement("canvas");
            canvas.width = width;
            canvas.height = height;
            const ctx = canvas.getContext("2d");
            ctx.drawImage(img, 0, 0, width, height);

            canvas.toBlob((compressedBlob) => {
              const url = URL.createObjectURL(compressedBlob);
              const a = document.createElement("a");
              a.href = url;
              a.download = `compressed_image.${ext}`;
              a.click();
              URL.revokeObjectURL(url);
            }, mimeType, mimeType === 'image/jpeg' ? 0.5 : 0.6); // kualitas bisa diatur
          };
          img.src = URL.createObjectURL(blob);
        });

      // Tutup dropdown
      document.querySelectorAll('[data-dropdown]').forEach(el => el.classList.add('hidden'));
    }



    function toggleDropdown(button) {
      const dropdown = button.nextElementSibling;
      document.querySelectorAll('[data-dropdown]').forEach(el => {
        if (el !== dropdown) el.classList.add('hidden');
      });
      dropdown.classList.toggle('hidden');
    }

  </script>

</body>

</html>